SUBDESIGN target
(	clock						:INPUT;
	position[9..0]				:OUTPUT;
)
VARIABLE
	count[9..0]		:DFF;
	direction		:DFF;
		
BEGIN
DEFAULTS
	direction.prn = vcc;
	direction.clrn = vcc;
END DEFAULTS;

	direction.d = gnd;
	direction.clk = gnd;
	count[].clk = clock;
--	IF count[].q == 256 THEN direction = gnd;		-- down  
--	ELSIF count[].q == 128 # count[].q == 0 THEN direction = vcc;		-- up
	IF count[].q == 400 THEN direction.clrn = gnd;		-- down  
	ELSIF count[].q == 100 THEN direction.prn = gnd;	-- up
	ELSE direction.prn = vcc; direction.clrn=vcc;
--	ELSE direction = direction;						-- no change
	END IF;
	
	IF direction == 1 THEN count[].d = count[].q + 1;
	ELSIF direction == 0 THEN count[].d = count[].q - 1;
	END IF;
	position[] = count[].q;
END;


	